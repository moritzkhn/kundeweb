{"ast":null,"code":"import log from 'loglevel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../auth/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LoginLogoutComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 2);\n    i0.ɵɵlistener(\"submit\", function LoginLogoutComponent_form_0_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onLogout());\n    });\n    i0.ɵɵelementStart(1, \"button\", 3)(2, \"span\", 4);\n    i0.ɵɵtext(3, \"Logout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"i\", 5);\n    i0.ɵɵtext(5, \"chevron_right\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction LoginLogoutComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 2);\n    i0.ɵɵlistener(\"submit\", function LoginLogoutComponent_ng_template_2_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onLogin());\n    });\n    i0.ɵɵelementStart(1, \"div\", 6)(2, \"label\", 7)(3, \"small\");\n    i0.ɵɵtext(4, \"Benutzername\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginLogoutComponent_ng_template_2_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.username = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"label\", 9)(8, \"small\");\n    i0.ɵɵtext(9, \"Passwort\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginLogoutComponent_ng_template_2_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.password = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 6)(12, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function LoginLogoutComponent_ng_template_2_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onLogin());\n    });\n    i0.ɵɵtext(13, \" Login \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.password);\n  }\n}\n/**\r\n * Komponente f&uuml;r das Login mit dem Tag &lt;hs-login-logout&gt;.\r\n */\n\n\nexport class LoginLogoutComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    log.debug('LoginLogoutComponent.constructor()');\n  }\n\n  ngOnInit() {\n    log.debug('LoginLogoutComponent.ngOnInit: ', this.authService.isLoggedIn);\n    this.isLoggedIn$ = this.authService.isLoggedIn$;\n    this.isLoggedIn$.subscribe(); // Initialisierung, falls zwischenzeitlich der Browser geschlossen wurde\n\n    this.init = this.authService.isLoggedIn;\n  }\n\n  onLogin() {\n    log.debug('LoginLogoutComponent.onLogin()');\n\n    if (this.username === undefined || this.username === null) {\n      return;\n    }\n\n    const loginResult = this.authService.login(this.username, this.password);\n    this.init = false;\n    return loginResult;\n  }\n  /**\r\n   * Ausloggen und dabei Benutzername und Passwort zur&uuml;cksetzen.\r\n   */\n\n\n  onLogout() {\n    log.debug('LoginLogoutComponent.onLogout()');\n    this.authService.logout();\n    this.init = false;\n    this.isLoggedIn$.next(false);\n    return this.router.navigate(['/']);\n  }\n\n}\n\nLoginLogoutComponent.ɵfac = function LoginLogoutComponent_Factory(t) {\n  return new (t || LoginLogoutComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nLoginLogoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginLogoutComponent,\n  selectors: [[\"hs-login-logout\"]],\n  decls: 4,\n  vars: 4,\n  consts: [[\"class\", \"row row-cols-md-auto g-3 align-items-center\", \"autocomplete\", \"off\", \"role\", \"form\", 3, \"submit\", 4, \"ngIf\", \"ngIfElse\"], [\"login\", \"\"], [\"autocomplete\", \"off\", \"role\", \"form\", 1, \"row\", \"row-cols-md-auto\", \"g-3\", \"align-items-center\", 3, \"submit\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"me-1\"], [1, \"material-icons\", \"md-48\"], [1, \"col-12\"], [\"for\", \"usernameInput\", 1, \"col-form-label\"], [\"id\", \"usernameInput\", \"type\", \"search\", \"tabindex\", \"1\", \"autocomplete\", \"off\", \"required\", \"\", \"name\", \"username\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"passwordInput\", 1, \"col-form-label\"], [\"id\", \"passwordInput\", \"type\", \"password\", \"tabindex\", \"2\", \"autocomplete\", \"off\", \"required\", \"\", \"name\", \"password\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", \"tabindex\", \"3\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"]],\n  template: function LoginLogoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, LoginLogoutComponent_form_0_Template, 6, 0, \"form\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵtemplate(2, LoginLogoutComponent_ng_template_2_Template, 14, 2, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(3);\n\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx.isLoggedIn$) || ctx.init)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i3.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["log","i0","LoginLogoutComponent","constructor","authService","router","debug","ngOnInit","isLoggedIn","isLoggedIn$","subscribe","init","onLogin","username","undefined","loginResult","login","password","onLogout","logout","next","navigate","selectors","decls","vars","consts","template","_r1"],"sourceRoot":"","sources":["C:\\Users\\Student\\Documents\\SWE\\kundeweb\\kundeweb\\src\\app\\layout\\header\\login-logout.component.ts","C:\\Users\\Student\\Documents\\SWE\\kundeweb\\kundeweb\\src\\app\\layout\\header\\login-logout.component.html"],"sourcesContent":["/*\n * Copyright (C) 2015 - present Juergen Zimmermann, Hochschule Karlsruhe\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, type OnInit } from '@angular/core';\nimport { AuthService } from '../../auth/auth.service';\nimport { Subject } from 'rxjs';\nimport { Router } from '@angular/router';\nimport log from 'loglevel';\n\n/**\n * Komponente f&uuml;r das Login mit dem Tag &lt;hs-login-logout&gt;.\n */\n@Component({\n    selector: 'hs-login-logout',\n    templateUrl: './login-logout.component.html',\n})\nexport class LoginLogoutComponent implements OnInit {\n    username: string | undefined;\n    password: string | undefined;\n\n    // Observable.subscribe() aus RxJS liefert ein Subscription Objekt,\n    // mit dem man den Request auch abbrechen (\"cancel\") kann\n    // https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/subscribe.md\n    // http://stackoverflow.com/questions/34533197/what-is-the-difference-between-rx-observable-subscribe-and-foreach\n    // https://xgrommx.github.io/rx-book/content/observable/observable_instance_methods/subscribe.html\n    // Funktion als Funktionsargument, d.h. Code als Daten uebergeben\n    // Suffix \"$\" wird als \"Finnish Notation\" bezeichnet https://medium.com/@benlesh/observables-and-finnish-notation-df8356ed1c9b\n    isLoggedIn$!: Subject<boolean>;\n    init!: boolean;\n\n    constructor(\n        private readonly authService: AuthService,\n        private readonly router: Router,\n    ) {\n        log.debug('LoginLogoutComponent.constructor()');\n    }\n\n    ngOnInit() {\n        log.debug(\n            'LoginLogoutComponent.ngOnInit: ',\n            this.authService.isLoggedIn,\n        );\n\n        this.isLoggedIn$ = this.authService.isLoggedIn$;\n        this.isLoggedIn$.subscribe();\n\n        // Initialisierung, falls zwischenzeitlich der Browser geschlossen wurde\n        this.init = this.authService.isLoggedIn;\n    }\n\n    onLogin() {\n        log.debug('LoginLogoutComponent.onLogin()');\n        if (this.username === undefined || this.username === null) {\n            return;\n        }\n        const loginResult = this.authService.login(\n            this.username,\n            this.password,\n        );\n        this.init = false;\n        return loginResult;\n    }\n\n    /**\n     * Ausloggen und dabei Benutzername und Passwort zur&uuml;cksetzen.\n     */\n    onLogout() {\n        log.debug('LoginLogoutComponent.onLogout()');\n        this.authService.logout();\n        this.init = false;\n        this.isLoggedIn$.next(false);\n        return this.router.navigate(['/']);\n    }\n}\n","<!--\n    Copyright (C) 2015 - present Juergen Zimmermann, Hochschule Karlsruhe\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-->\n\n<!-- Inline form https://v5.getbootstrap.com/docs/5.0/forms/layout/#inline-forms -->\n<!-- prettier-ignore -->\n<form\n  class=\"row row-cols-md-auto g-3 align-items-center\"\n  autocomplete=\"off\"\n  role=\"form\"\n  (submit)=\"onLogout()\"\n  *ngIf=\"(isLoggedIn$ | async) || init; else login\"\n>\n  <button\n    type=\"submit\"\n    class=\"btn btn-primary\"\n  >\n    <span class=\"me-1\">Logout</span>\n    <i class=\"material-icons md-48\">chevron_right</i>\n  </button>\n</form>\n\n<ng-template #login>\n  <form\n    class=\"row row-cols-md-auto g-3 align-items-center\"\n    autocomplete=\"off\"\n    role=\"form\"\n    (submit)=\"onLogin()\"\n  >\n    <div class=\"col-12\">\n      <label for=\"usernameInput\" class=\"col-form-label\">\n        <small>Benutzername</small>\n      </label>\n      <input\n        id=\"usernameInput\"\n        type=\"search\"\n        class=\"form-control form-control-sm\"\n        tabindex=\"1\"\n        autocomplete=\"off\"\n        required\n        [(ngModel)]=\"username\"\n        name=\"username\"\n      />\n    </div>\n\n    <div class=\"col-12\">\n      <label for=\"passwordInput\" class=\"col-form-label\">\n        <small>Passwort</small>\n      </label>\n      <input\n        id=\"passwordInput\"\n        type=\"password\"\n        class=\"form-control form-control-sm\"\n        tabindex=\"2\"\n        autocomplete=\"off\"\n        required\n        [(ngModel)]=\"password\"\n        name=\"password\"\n      />\n    </div>\n    <div class=\"col-12\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary btn-sm\"\n        tabindex=\"3\"\n        (click)=\"onLogin()\"\n      >\n        Login\n      </button>\n    </div>\n  </form>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}